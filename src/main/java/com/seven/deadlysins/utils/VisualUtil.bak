package com.seven.deadlysins.utils;

import com.seven.deadlysins.registry.CustomEnchant;
import org.bukkit.Color;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.Particle;
import org.bukkit.World;
import org.bukkit.inventory.ItemStack;
import org.bukkit.util.Vector;

/**
 * Cinematic Semantic Visual Engine
 * 100% Unique, Creative, and Action-Oriented Animations.
 */
public class VisualUtil {

    public static void playVisual(Location center, Vector dir, CustomEnchant enchant, double scale) {
        World world = center.getWorld();
        if (world == null)
            return;
        if (dir == null)
            dir = new Vector(0, 1, 0);

        String n = enchant.name();

        // --- WRATH (Crimson, Explosive, Slash-Heavy) ---
        if (n.equals("BLOOD_EAGLE")) {
            // Semantic: Giant Crimson Cross-Slash
            for (double i = -1.5; i <= 1.5; i += 0.5) {
                world.spawnParticle(Particle.SWEEP_ATTACK, center.clone().add(dir.clone().multiply(i)), 1);
            }
            world.spawnParticle(Particle.SONIC_BOOM, center, 1);
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.0, 5.0, 60, 3,
                    new Particle.DustOptions(Color.MAROON, 2.0f));
        } else if (n.equals("BERSERKERS_RAGE")) {
            // Semantic: Enraged Vortex
            GeometricRenderer.spawnHelix(center, Particle.LAVA, 1.5, 4.0, 40, 4, null);
            world.spawnParticle(Particle.ANGRY_VILLAGER, center.clone().add(0, 2, 0), 10, 0.5, 0.5, 0.5, 0);
            GeometricRenderer.spawnRing(center, Particle.DUST, 2.0, 40, new Particle.DustOptions(Color.RED, 2.0f));
        } else if (n.equals("SIEGE_BREAKER")) {
            // Semantic: Armor Shatter (Metal shards flying)
            world.spawnParticle(Particle.BLOCK, center, 100, 1.0, 1.0, 1.0, 0.2, Material.IRON_BLOCK.createBlockData());
            world.spawnParticle(Particle.CRIT, center, 50, 1.5, 1.5, 1.5, 0.5);
            GeometricRenderer.spawnPulse(center, Particle.GUST, 3.0, 3, null);
        } else if (n.equals("HELLFIRE_TREBUCHET")) {
            // Semantic: Mortar Launch (Fire trail upwards)
            GeometricRenderer.spawnBeam(center, center.clone().add(0, 5, 0), Particle.FLAME, 0.3, null);
            world.spawnParticle(Particle.LAVA, center, 30, 0.5, 0.5, 0.5, 0.1);
        } else if (n.equals("WARLORDS_CRY")) {
            // Semantic: Shockwave Shout
            world.spawnParticle(Particle.GUST_EMITTER_LARGE, center, 1);
            GeometricRenderer.spawnSphere(center, Particle.DUST, 4.0, 100,
                    new Particle.DustOptions(Color.ORANGE, 1.5f));
            GeometricRenderer.spawnPulse(center, Particle.CLOUD, 5.0, 2, null);
        } else if (n.equals("DUELISTS_SPITE")) {
            // Semantic: Consecutive Precise Slashes
            GeometricRenderer.spawnRing(center, Particle.SWEEP_ATTACK, 1.5, 10, null);
            GeometricRenderer.spawnHelix(center, Particle.DUST, 0.5, 3.0, 40, 2,
                    new Particle.DustOptions(Color.BLACK, 1.2f));
        } else if (n.equals("IMPALER")) {
            // Semantic: Earth Spikes
            for (int i = 0; i < 4; i++) {
                double a = i * Math.PI / 2;
                Location base = center.clone().add(Math.cos(a) * 1.5, -1, Math.sin(a) * 1.5);
                GeometricRenderer.spawnBeam(base, base.clone().add(0, 4, 0), Particle.CRIT, 0.2, null);
                world.spawnParticle(Particle.BLOCK, base.clone().add(0, 1, 0), 20, 0.2, 0.2, 0.2, 0.1,
                        Material.POINTED_DRIPSTONE.createBlockData());
            }
        } else if (n.equals("SCORCHED_EARTH")) {
            // Semantic: Ground Eruption
            GeometricRenderer.spawnPulse(center, Particle.LAVA, 5.0, 4, null);
            world.spawnParticle(Particle.FLAME, center, 150, 3.0, 0.1, 3.0, 0.1);
        } else if (n.equals("VENGEANCE_STRIKE")) {
            // Semantic: Counter Explosion
            world.spawnParticle(Particle.FLASH, center, 1);
            world.spawnParticle(Particle.EXPLOSION_EMITTER, center, 1);
            GeometricRenderer.spawnRing(center, Particle.SWEEP_ATTACK, 3.0, 12, null);
        } else if (n.equals("MUTILATION")) {
            // Semantic: Bleed Spray
            world.spawnParticle(Particle.DUST, center, 100, 0.5, 2.0, 0.5, 0.1,
                    new Particle.DustOptions(Color.MAROON, 1.5f));
            GeometricRenderer.spawnHelix(center, Particle.DUST, 0.8, 3.5, 40, 5,
                    new Particle.DustOptions(Color.RED, 1.2f));
        }

        // --- PRIDE (Golden, Radiating, Royal) ---
        else if (n.equals("KINGS_RESURGENCE")) {
            // Semantic: Holy Shield Burst
            world.spawnParticle(Particle.FLASH, center, 2);
            GeometricRenderer.spawnSphere(center, Particle.TRIAL_OMEN, 4.0, 100, null);
            GeometricRenderer.spawnRing(center, Particle.WAX_OFF, 3.0, 60, null);
            world.spawnParticle(Particle.GUST_EMITTER_LARGE, center, 1);
        } else if (n.equals("REGAL_PRESENCE")) {
            // Semantic: Repelling Ripples
            for (int i = 1; i <= 3; i++) {
                GeometricRenderer.spawnRing(center, Particle.GUST, 1.5 * i, 30 + (10 * i), null);
            }
            GeometricRenderer.spawnRing(center, Particle.DUST, 4.5, 80, new Particle.DustOptions(Color.YELLOW, 1.5f));
        } else if (n.equals("SOLITARY_MONARCH")) {
            // Semantic: Pillar of Isolation
            GeometricRenderer.spawnBeam(center.clone().subtract(0, 2, 0), center.clone().add(0, 6, 0), Particle.DUST,
                    0.5, new Particle.DustOptions(Color.AQUA, 1.5f));
            world.spawnParticle(Particle.FLASH, center, 1);
        } else if (n.equals("CHAMPIONS_CHALLENGE")) {
            // Semantic: Duel Ring (Rotating halo)
            GeometricRenderer.spawnRing(center.clone().add(0, 1, 0), Particle.END_ROD, 2.5, 50, null);
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.2, 5.0, 60, 4,
                    new Particle.DustOptions(Color.YELLOW, 1.0f));
        } else if (n.equals("CROWN_OF_THORNS")) {
            // Semantic: Golden Crown Pulse
            for (int i = 0; i < 3; i++)
                GeometricRenderer.spawnRing(center.clone().add(0, 0.5 * i, 0), Particle.DUST, 2.0 - (0.2 * i), 40,
                        new Particle.DustOptions(Color.YELLOW, 1.0f));
            world.spawnParticle(Particle.WAX_OFF, center.clone().add(0, 1, 0), 20);
        } else if (n.equals("ARROGANT_PARRY")) {
            // Semantic: Stagger Shock
            world.spawnParticle(Particle.SONIC_BOOM, center, 1);
            GeometricRenderer.spawnPulse(center, Particle.GUST, 3.5, 3, null);
        } else if (n.equals("SOVEREIGNS_REACH")) {
            // Semantic: Extended Piercing Beam
            Location end = center.clone().add(dir.clone().multiply(scale));
            GeometricRenderer.spawnBeam(center, end, Particle.END_ROD, 0.3, null);
            world.spawnParticle(Particle.SWEEP_ATTACK, end, 3);
        } else if (n.equals("GILDED_EXECUTION")) {
            // Semantic: Gold Burst
            world.spawnParticle(Particle.BLOCK, center, 50, 1.0, 1.0, 1.0, 0.2, Material.GOLD_BLOCK.createBlockData());
            GeometricRenderer.spawnPulse(center, Particle.WAX_OFF, 3.0, 2, null);
        } else if (n.equals("UNBOWED")) {
            // Semantic: Immovable Wall
            GeometricRenderer.spawnRing(center, Particle.ITEM, 2.5, 50, new ItemStack(Material.SLIME_BALL));
            GeometricRenderer.spawnPulse(center, Particle.CLOUD, 3.0, 2, null);
        } else if (n.equals("ROYAL_DECREE")) {
            // Semantic: Divine Lightning Strike (Visual only)
            GeometricRenderer.spawnBeam(center.clone().add(0, 10, 0), center, Particle.DUST, 0.5,
                    new Particle.DustOptions(Color.BLUE, 2.0f));
            world.spawnParticle(Particle.TRIAL_SPAWNER_DETECTION, center, 50, 2.0, 0.5, 2.0, 0.1);
        }

        // --- GREED (Emerald, Siphoning, Economy) ---
        else if (n.equals("HIGHWAYMANS_TOLL")) {
            // Semantic: XP Siphon (Particles moving inward)
            for (int i = 0; i < 20; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(3.0);
                world.spawnParticle(Particle.HAPPY_VILLAGER, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(),
                        0.2);
            }
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.0, 4.0, 60, 4,
                    new Particle.DustOptions(Color.YELLOW, 1.2f));
        } else if (n.equals("MIDAS_TOUCH")) {
            // Semantic: Transmutation Wave
            GeometricRenderer.spawnSphere(center, Particle.WAX_OFF, 2.5, 60, null);
            world.spawnParticle(Particle.BLOCK, center, 80, 1.5, 1.5, 1.5, 0.1, Material.GOLD_BLOCK.createBlockData());
        } else if (n.equals("PLUNDERERS_STRIKE")) {
            // Semantic: Emerald Coin Eruption
            world.spawnParticle(Particle.TRIAL_SPAWNER_DETECTION, center, 40, 1.0, 1.0, 1.0, 0.1);
            GeometricRenderer.spawnRing(center, Particle.BLOCK, 2.2, 40, Material.EMERALD_BLOCK.createBlockData());
        } else if (n.equals("HOARDERS_VITALITY")) {
            // Semantic: Golden DNA Lifesteal
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.5, 4.0, 60, 3,
                    new Particle.DustOptions(Color.YELLOW, 1.5f));
            world.spawnParticle(Particle.HEART, center, 5, 0.5, 1.0, 0.5, 0.1);
        } else if (n.equals("MERCENARYS_FORTUNE")) {
            // Semantic: Contract Signature (Yellow/Green helix)
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.2, 4.0, 60, 4,
                    new Particle.DustOptions(Color.GREEN, 1.0f));
            world.spawnParticle(Particle.HAPPY_VILLAGER, center, 30, 2.0, 1.0, 2.0, 0.05);
        } else if (n.equals("DRAGONS_HOARD")) {
            // Semantic: Vault Protection
            GeometricRenderer.spawnSphere(center, Particle.FLAME, 3.5, 80, null);
            world.spawnParticle(Particle.DRAGON_BREATH, center, 50, 1.0, 1.0, 1.0, 0.02);
        } else if (n.equals("EXTORTION")) {
            // Semantic: Red Chain Lock
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.0, 5.0, 80, 2,
                    new Particle.DustOptions(Color.RED, 1.4f));
            GeometricRenderer.spawnRing(center, Particle.LARGE_SMOKE, 1.8, 30, null);
        } else if (n.equals("PICKPOCKET")) {
            // Semantic: Shadow Steal (Quick smoke puff)
            world.spawnParticle(Particle.LARGE_SMOKE, center, 50, 1.0, 2.0, 1.0, 0.1);
            GeometricRenderer.spawnRing(center, Particle.WHITE_ASH, 1.5, 40, null);
        } else if (n.equals("TREASURE_HUNTER")) {
            // Semantic: Guided Compass Beam
            GeometricRenderer.spawnBeam(center, center.clone().add(0, 15, 0), Particle.END_ROD, 0.5, null);
            world.spawnParticle(Particle.WAX_OFF, center, 20, 1.0, 2.0, 1.0, 0.02);
        } else if (n.equals("USURY")) {
            // Semantic: Rapid Harvest Rain
            world.spawnParticle(Particle.CHERRY_LEAVES, center.clone().add(0, 3, 0), 100, 2.0, 1.0, 2.0, 0.1);
            GeometricRenderer.spawnPulse(center, Particle.HAPPY_VILLAGER, 4.0, 2, null);
        }

        // --- ENVY (Tethred, Shadow, Twisted) ---
        else if (n.equals("MIMICRY")) {
            // Semantic: Shape Shift (Interlocking purple rings)
            GeometricRenderer.spawnRing(center, Particle.PORTAL, 2.0, 50, null);
            GeometricRenderer.spawnRing(center, Particle.DUST, 1.5, 40, new Particle.DustOptions(Color.PURPLE, 1.2f));
        } else if (n.equals("USURPERS_BLADE")) {
            // Semantic: Soul Drain Link
            GeometricRenderer.spawnBeam(center, center.clone().add(0, 5, 0), Particle.SCULK_SOUL, 0.2, null);
            GeometricRenderer.spawnRing(center, Particle.DUST, 2.0, 40, new Particle.DustOptions(Color.GREEN, 1.4f));
        } else if (n.equals("SHADOW_CLONE")) {
            // Semantic: Decoy Poof
            world.spawnParticle(Particle.WITCH, center, 80, 1.0, 2.0, 1.0, 0.1);
            GeometricRenderer.spawnPulse(center, Particle.LARGE_SMOKE, 3.5, 3, null);
        } else if (n.equals("THIEF_OF_BUFFS")) {
            // Semantic: Potion Siphon (Green tether)
            for (int i = 0; i < 15; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(4.0);
                world.spawnParticle(Particle.DUST, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(), 0.1,
                        new Particle.DustOptions(Color.GREEN, 1.2f));
            }
        } else if (n.equals("SPITEFUL_SABOTAGE")) {
            // Semantic: Equipment Decay (Corroding metal)
            world.spawnParticle(Particle.BLOCK, center, 80, 1.5, 2.0, 1.5, 0.1, Material.IRON_BLOCK.createBlockData());
            GeometricRenderer.spawnHelix(center, Particle.ASH, 1.5, 4.0, 60, 4, null);
        } else if (n.equals("GREEN_EYED_GLARE")) {
            // Semantic: Ominous Insight (Eye-level burst)
            world.spawnParticle(Particle.OMINOUS_SPAWNING, center.clone().add(0, 1.5, 0), 30, 0.5, 0.5, 0.5, 0.05);
            GeometricRenderer.spawnRing(center.clone().add(0, 1.5, 0), Particle.WHITE_ASH, 1.2, 40, null);
        } else if (n.equals("PARASITIC_LINK")) {
            // Semantic: Soul Tether (Witch/Soul particles linking mobs)
            GeometricRenderer.spawnHelix(center, Particle.WITCH, 1.8, 6.0, 100, 4, null);
            world.spawnParticle(Particle.SCULK_SOUL, center, 40, 2.0, 3.0, 2.0, 0.02);
        } else if (n.equals("FALSE_IDOL")) {
            // Semantic: Void Swap
            world.spawnParticle(Particle.PORTAL, center, 100, 1.5, 1.5, 1.5, 0.1);
            GeometricRenderer.spawnSphere(center, Particle.LARGE_SMOKE, 3.0, 60, null);
        } else if (n.equals("DOPPELGANGER")) {
            // Semantic: Ghostly Striking
            GeometricRenderer.spawnRing(center, Particle.SWEEP_ATTACK, 2.5, 8, null);
            GeometricRenderer.spawnHelix(center, Particle.PORTAL, 1.0, 5.0, 60, 3, null);
        } else if (n.equals("COVETOUS_PULL")) {
            // Semantic: Attraction Vacuum (Inward bubbles)
            for (int i = 0; i < 20; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(5.0);
                world.spawnParticle(Particle.SPLASH, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(), 0.3);
            }
        }

        // --- GLUTTONY (Inward, Void, Consumption) ---
        else if (n.equals("DEVOURERS_MAW")) {
            // Semantic: Hunger Void (Sucking in crit particles)
            for (int i = 0; i < 30; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(4.0);
                world.spawnParticle(Particle.CRIT, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(), 0.2);
            }
            GeometricRenderer.spawnSphere(center, Particle.LARGE_SMOKE, 3.0, 60, null);
        } else if (n.equals("CANNIBALIZE")) {
            // Semantic: Blood Sacrifice
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.2, 4.0, 60, 4,
                    new Particle.DustOptions(Color.RED, 1.5f));
            world.spawnParticle(Particle.ITEM_SLIME, center, 30);
        } else if (n.equals("FEAST_OF_SOULS")) {
            // Semantic: Soul Absorption (Spirals moving up)
            GeometricRenderer.spawnHelix(center, Particle.SCULK_SOUL, 1.5, 6.0, 80, 3, null);
            world.spawnParticle(Particle.FIREWORK, center, 20, 1.0, 1.0, 1.0, 0.1);
        } else if (n.equals("ACIDIC_BITE")) {
            // Semantic: Corrosive Spray
            world.spawnParticle(Particle.DUST, center, 80, 1.0, 1.5, 1.0, 0.1,
                    new Particle.DustOptions(Color.LIME, 1.2f));
            GeometricRenderer.spawnRing(center, Particle.ITEM, 2.0, 30, new ItemStack(Material.SLIME_BALL));
        } else if (n.equals("BOTTOMLESS_PIT")) {
            // Semantic: Gravity Funnel (Cone shape)
            for (int i = 0; i < 5; i++)
                GeometricRenderer.spawnRing(center.clone().add(0, i * 0.8, 0), Particle.SQUID_INK, 1.0 + (i * 0.5),
                        20 + (i * 10), null);
        } else if (n.equals("BLACK_HOLE")) {
            // Semantic: Singularity (Massive inward pull)
            for (int i = 0; i < 50; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(6.0);
                world.spawnParticle(Particle.SCULK_SOUL, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(),
                        0.4);
            }
            world.spawnParticle(Particle.SONIC_BOOM, center, 1);
            GeometricRenderer.spawnSphere(center, Particle.LARGE_SMOKE, 4.0, 120, null);
        } else if (n.equals("OMNIVORE")) {
            // Semantic: Digestion Aura
            GeometricRenderer.spawnRing(center, Particle.BLOCK, 2.5, 40, Material.DIRT.createBlockData());
            GeometricRenderer.spawnPulse(center, Particle.CLOUD, 3.0, 2, null);
        } else if (n.equals("GLUTTONOUS_SWARM")) {
            // Semantic: Bee-like Hive Pulse
            GeometricRenderer.spawnSphere(center, Particle.CRIT, 2.5, 100, null);
            world.spawnParticle(Particle.WITCH, center, 40, 2.0, 2.0, 2.0, 0.05);
        } else if (n.equals("GORGING_DEFENSE")) {
            // Semantic: Protective Fat (Layered cloud rings)
            for (int i = 0; i < 3; i++)
                GeometricRenderer.spawnRing(center.clone().add(0, i * 0.8, 0), Particle.CLOUD, 2.5 - (i * 0.3), 40,
                        null);
        } else if (n.equals("LEECHING_PLAGUE")) {
            // Semantic: Viral Vectors
            for (int i = 0; i < 8; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0, 0.5)).normalize().multiply(5);
                GeometricRenderer.spawnBeam(center, center.clone().add(v), Particle.DUST, 0.2,
                        new Particle.DustOptions(Color.MAROON, 1.2f));
            }
        }

        // --- SLOTH (Frozen, Misty, Heavy) ---
        else if (n.equals("LETHARGY")) {
            // Semantic: Thick Fog
            world.spawnParticle(Particle.CLOUD, center, 200, 3.0, 2.0, 3.0, 0.01);
            GeometricRenderer.spawnHelix(center, Particle.DUST, 2.0, 5.0, 80, 2,
                    new Particle.DustOptions(Color.GRAY, 1.5f));
        } else if (n.equals("HIBERNATION")) {
            // Semantic: Ice Shell
            GeometricRenderer.spawnSphere(center, Particle.POOF, 3.0, 100, null);
            world.spawnParticle(Particle.ITEM_SNOWBALL, center, 100, 1.5, 1.5, 1.5, 0.1);
        } else if (n.equals("YAWNING_CHASM")) {
            // Semantic: Quicksand Field (Ground rings)
            for (int i = 1; i <= 3; i++)
                GeometricRenderer.spawnRing(center.clone().add(0, 0.1, 0), Particle.CLOUD, i * 2.0, i * 30, null);
            world.spawnParticle(Particle.GUST, center, 50, 5.0, 0.1, 5.0, 0.05);
        } else if (n.equals("APATHY")) {
            // Semantic: Dark Nihility
            GeometricRenderer.spawnPulse(center, Particle.SQUID_INK, 5.0, 4, null);
            world.spawnParticle(Particle.LARGE_SMOKE, center, 300, 3.0, 0.5, 3.0, 0.01);
        } else if (n.equals("HEAVY_BURDEN")) {
            // Semantic: Descending Weight
            GeometricRenderer.spawnBeam(center.clone().add(0, 5, 0), center, Particle.CRIT, 0.3, null);
            world.spawnParticle(Particle.BLOCK, center, 100, 1.5, 0.1, 1.5, 0.1, Material.ANVIL.createBlockData());
        } else if (n.equals("SLUGGARDS_PACE")) {
            // Semantic: Frost Trail
            GeometricRenderer.spawnRing(center, Particle.SNOWFLAKE, 2.5, 40, null);
            world.spawnParticle(Particle.POOF, center, 50, 1.5, 0.1, 1.5, 0.02);
        } else if (n.equals("SOMNOLENCE")) {
            // Semantic: Sleepy ZZZ's (Enchant bubbles)
            world.spawnParticle(Particle.ENCHANT, center, 200, 2.0, 3.0, 2.0, 0.05);
            GeometricRenderer.spawnHelix(center, Particle.CLOUD, 2.0, 5.0, 60, 2, null);
        } else if (n.equals("INERTIA")) {
            // Semantic: Frozen Frame
            GeometricRenderer.spawnRing(center, Particle.DUST, 2.0, 60, new Particle.DustOptions(Color.AQUA, 1.3f));
            world.spawnParticle(Particle.END_ROD, center, 50, 2.0, 2.0, 2.0, 0);
        } else if (n.equals("PROCRASTINATION")) {
            // Semantic: Time Delay (Floating clock dust)
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.5, 4.0, 50, 3,
                    new Particle.DustOptions(Color.GRAY, 1.0f));
            world.spawnParticle(Particle.SQUID_INK, center.clone().add(0, 2, 0), 20);
        } else if (n.equals("TIME_DILATION")) {
            // Semantic: Chronos Pulse (Massive impact freeze)
            GeometricRenderer.spawnPulse(center, Particle.DUST, 6.0, 5, new Particle.DustOptions(Color.WHITE, 2.0f));
            world.spawnParticle(Particle.TRIAL_SPAWNER_DETECTION, center, 50, 4.0, 4.0, 4.0, 0.01);
        }

        // --- LUST (Pink, Attractive, Flowing) ---
        else if (n.equals("SIRENS_SONG")) {
            // Semantic: Compelling Melody (Heart streams)
            GeometricRenderer.spawnHelix(center, Particle.HEART, 3.0, 6.0, 100, 3, null);
            GeometricRenderer.spawnHelix(center, Particle.NOTE, 2.5, 6.0, 80, -3, null);
        } else if (n.equals("BLOODLUST")) {
            // Semantic: Frenzy Stream
            world.spawnParticle(Particle.DUST, center, 400, 3.0, 3.0, 3.0, 0,
                    new Particle.DustOptions(Color.fromRGB(255, 20, 147), 1.5f));
            GeometricRenderer.spawnPulse(center, Particle.FLAME, 3.5, 3, null);
        } else if (n.equals("SUCCUBUS_KISS")) {
            // Semantic: XP Drain Tether
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.2, 5.0, 80, 5,
                    new Particle.DustOptions(Color.fromRGB(255, 105, 180), 1.2f));
            GeometricRenderer.spawnHelix(center, Particle.DUST, 1.2, 5.0, 80, -5,
                    new Particle.DustOptions(Color.fromRGB(240, 150, 200), 1.2f));
        } else if (n.equals("FATAL_ATTRACTION")) {
            // Semantic: Attraction Vacuum (Inward Hearts)
            for (int i = 0; i < 25; i++) {
                Vector v = Vector.getRandom().subtract(new Vector(0.5, 0.5, 0.5)).normalize().multiply(5.0);
                world.spawnParticle(Particle.HEART, center.clone().add(v), 0, -v.getX(), -v.getY(), -v.getZ(), 0.3);
            }
            GeometricRenderer.spawnPulse(center, Particle.EXPLOSION, 3.0, 2, null);
        } else if (n.equals("ILLUSIONISTS_VEIL")) {
            // Semantic: Mirrors & Smoke
            world.spawnParticle(Particle.FLASH, center, 2);
            GeometricRenderer.spawnSphere(center, Particle.CLOUD, 3.5, 80, null);
        } else if (n.equals("MASQUERADE")) {
            // Semantic: Elegant Disappear (Cherry petals)
            world.spawnParticle(Particle.CHERRY_LEAVES, center, 300, 3.0, 3.0, 3.0, 0.1);
            GeometricRenderer.spawnSphere(center, Particle.WITCH, 3.0, 60, null);
        } else if (n.equals("BETRAYAL")) {
            // Semantic: Twisted Loyalty (Swirling angry faces)
            GeometricRenderer.spawnHelix(center, Particle.ANGRY_VILLAGER, 1.5, 5.0, 60, 4, null);
            world.spawnParticle(Particle.FLASH, center, 1);
        } else if (n.equals("CAPTIVATION")) {
            // Semantic: Charming Halo
            GeometricRenderer.spawnSphere(center, Particle.CLOUD, 3.0, 100, null);
            world.spawnParticle(Particle.HEART, center, 30, 2.0, 2.0, 2.0, 0.05);
        } else if (n.equals("LOVERS_SACRIFICE")) {
            // Semantic: Twin Souls (Interlocking heart helices)
            GeometricRenderer.spawnHelix(center, Particle.HEART, 1.5, 4.0, 80, 4, null);
            GeometricRenderer.spawnRing(center, Particle.DUST, 2.0, 40, new Particle.DustOptions(Color.RED, 1.2f));
        } else if (n.equals("INTOXICATING_STRIKE")) {
            // Semantic: Scrambled Senses (Fuchsia sensory overload)
            world.spawnParticle(Particle.ENTITY_EFFECT, center, 300, 3.0, 3.0, 3.0, 0, Color.FUCHSIA);
            GeometricRenderer.spawnPulse(center, Particle.EFFECT, 5.0, 4, null);
        }
    }
}
